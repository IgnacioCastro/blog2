<!DOCTYPE html>
<html class="has-navbar-fixed-top">
<head>
    <meta charset="utf-8">
<title>Extrayendo datos de la API de Servel - Ignacio&#39;s thoughts</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.css">




<meta name="description" content="">





    <meta name="description" content="Hace pocos dias se estren&amp;#xF3; la nueva aplicaci&amp;#xF3;n del Servel, la cual te permite revisar tu informaci&amp;#xF3;n electoral facilmente. Esta no usa captcha (como la p&amp;#xE1;gina web de la Servel), p">
<meta property="og:type" content="article">
<meta property="og:title" content="Extrayendo datos de la API de Servel">
<meta property="og:url" content="http://ignacio.wtf/blog/servelapi/">
<meta property="og:site_name" content="Ignacio&#39;s thoughts">
<meta property="og:description" content="Hace pocos dias se estren&amp;#xF3; la nueva aplicaci&amp;#xF3;n del Servel, la cual te permite revisar tu informaci&amp;#xF3;n electoral facilmente. Esta no usa captcha (como la p&amp;#xE1;gina web de la Servel), p">
<meta property="og:locale" content="es_ES">
<meta property="og:image" content="http://ignacio.wtf/blog/servelapi/appstore.png">
<meta property="og:image" content="http://ignacio.wtf/blog/servelapi/servelapp.jpg">
<meta property="og:image" content="http://ignacio.wtf/blog/servelapi/servelweb.jpg">
<meta property="article:published_time" content="2020-10-05T02:06:10.000Z">
<meta property="article:modified_time" content="2020-10-05T18:33:31.936Z">
<meta property="article:author" content="Ignacio Castro">
<meta property="article:tag" content="Servel">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://ignacio.wtf/blog/servelapi/appstore.png">





<link rel="icon" href="/blog/images/favicon.ico">


<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ovo|Source+Code+Pro">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/css/justifiedGallery.min.css">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css">


<link rel="stylesheet" href="/blog/css/style.css">


<script defer src="//use.fontawesome.com/releases/v5.0.8/js/all.js"></script>


    
    
    
    
    
    
    
    
    
    

    


<meta name="generator" content="Hexo 5.2.0"></head>
<body>
    
<nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item navbar-logo" href="/blog/">
                
                <img src="/blog/images/logo.png" alt="" height="28">
                
            </a>
            <div class="navbar-burger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        
        <div class="navbar-menu navbar-start">
            
            <a class="navbar-item "
               href="https://ignacio.wtf">About</a>
            
        </div>
        
        <div class="navbar-menu navbar-end">
            
            <a class="navbar-item search" title="Buscar" href="javascript:;">
                <i class="fas fa-search"></i>
            </a>
            
            
            <div class="navbar-item is-hoverable has-dropdown is-hidden-mobile is-hidden-tablet-only toc">
                <a class="navbar-item" title="Tabla de Contenidos">
                    <i class="fa fa-list"></i>
                </a>
                <div class="navbar-dropdown is-right">
                    
                    
                    
                    
                    <a class="navbar-item" href="#La-app">1&nbsp;&nbsp;<b>La app</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#Diferencias-con-la-version-web">2&nbsp;&nbsp;<b>Diferencias con la versión web</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#Funcionalidad-y-extraccion-de-datos-con-la-API-de-la-app">3&nbsp;&nbsp;<b>Funcionalidad y extracción de datos con la API de la app</b></a>
                    
                    
                    <hr class="navbar-divider">
                    
                    
                    <a class="navbar-item" href="#Automatizar-y-obtener-informacion-desde-el-terminal">4&nbsp;&nbsp;<b>Automatizar y obtener información desde el terminal</b></a>
                    
                </div>
            </div>
            
            
            <a class="navbar-item" title="GitHub" target="_blank" rel="noopener" href="https://github.com/ignaciocastro/">
                
                <i class="fab fa-github"></i>
                
            </a>
               
            
        </div>
    </div>
</nav>

    <section class="section">
    <div class="container">
    <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            Extrayendo datos de la API de Servel
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            
                <time datetime="2020-10-05T02:06:10.000Z" itemprop="datePublished">oct. 4 2020</time>
            
        </span>
        
        
        <span class="column is-narrow">
            
            
            16 minutos de lectura (Alrededor de 2441 palabras)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <html><head></head><body><img src="/blog/servelapi/appstore.png" class>
<p>Hace pocos dias se estren&#xF3; la nueva aplicaci&#xF3;n del Servel, la cual te permite revisar tu informaci&#xF3;n electoral facilmente. Esta no usa captcha (como la p&#xE1;gina web de la Servel), por lo tanto, podremos aprovecharnos de estos para Extraer informaci&#xF3;n desde los servidores en JSON.</p>
<a id="more"></a>
<h2 id="La-app"><a href="#La-app" class="headerlink" title="La app"></a>La app</h2><img src="/blog/servelapi/servelapp.jpg" class>
<p><a target="_blank" rel="noopener" href="https://www.servel.cl/servel-publico-nomina-de-vocales-locales-de-votacion-y-dispuso-una-aplicacion-movil-para-conocer-datos-electorales-2/">Este s&#xE1;bado</a> Servel di&#xF3; a conocer una nueva aplicaci&#xF3;n, la cual permite revisar tus datos electorales (Nombre completo, comuna, provincia, regi&#xF3;n, mesa, lugar de votaci&#xF3;n y posibilidad de votar).</p>
<h2 id="Diferencias-con-la-version-web"><a href="#Diferencias-con-la-version-web" class="headerlink" title="Diferencias con la versi&#xF3;n web"></a>Diferencias con la versi&#xF3;n web</h2><p>La <a target="_blank" rel="noopener" href="https://consulta.servel.cl/">versi&#xF3;n web</a> entrega los mismos datos que la aplicaci&#xF3;n, pero esta requiere una autenticaci&#xF3;n con hCaptcha para hacer una petici&#xF3;n a la API y entregar los datos, lo que imposibilitaria la mineria de datos y/o el scraping con bots.</p>
<img src="/blog/servelapi/servelweb.jpg" class title="hCaptcha">
<ol>
<li>Al hacer click en la verificaci&#xF3;n y completar el challenge, hCaptcha te devuelve un UUID<figure class="highlight json hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">   <span class="hljs-attr">&quot;pass&quot;</span>:<span class="hljs-literal">true</span>,</span><br><span class="line">   <span class="hljs-attr">&quot;generated_pass_UUID&quot;</span>:<span class="hljs-string">&quot;W0_eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJwYXNza2V5IjoiT0hna3JJMFBIa0IwL2RKUGgvLzRxZEFaVUxUYTd1eUFNVmlYWCtWK1Ztc2tNQ3Jxa2VoWXNJelNjdHBOR3V6dWJ6d0MrU2k5bHRlaVB6b0o2bEk2b3dXb2N1amxCcDg4dXU2NHVVclhKOVRHcFFXVEg2cWFScmFuUzg2QUZNMXAxVUJnSHFwQ2lXRks4dnN5NnRiRUwzY250VGZuWDZmSnFHZ0hpdnM2bng2Y3NVMGttLys0K3RyZGJuWmp5Ym5TcWN4R1U4ZEQzRXppT0tZVU5iUC9keGhKQmNndHFRUzFzTEhybXh1MnZYY1haU3N5TGFaRmhMaUQ4V09BdEE2QXVMVDBReEpOUXowbEJTeDk0L3BMTkZrSk1NdzdBQXJMQmx5Mi9KbFJnd1F2ZnpuaEk1RmVFL0FMOU1CbFQvanNLclNsN0YycTNKcVVrdEYrbCttM0l2MURTR05pa2JhUlFJdWs3S2RudUQ4emRsSFU3Si9Bay9jREFpeXFVTitlbEVHUTB4SFppR0xaeTI1c2F6b2ZkdmdJcDhSQ1NIbHZYUkg0cEhaaWIxY0Jua0oxIiwic2l0ZWtleSI6ImY3OWFlM2MxLWVhYzAtNDllMS1hMDEwLWY4MzAwMGFkNTA3OSIsImV4cCI6MTYwMTg3MTIxMCwicGQiOjB9.EuTcPg2XFSCeu3PJLPsoV-fnxnkAQtgJcC8AAiAkKxU&quot;</span>,</span><br><span class="line">   <span class="hljs-attr">&quot;expiration&quot;</span>:<span class="hljs-number">120</span>,</span><br><span class="line">   <span class="hljs-attr">&quot;c&quot;</span>:{</span><br><span class="line">      <span class="hljs-attr">&quot;type&quot;</span>:<span class="hljs-string">&quot;hsw&quot;</span>,</span><br><span class="line">      <span class="hljs-attr">&quot;req&quot;</span>:<span class="hljs-string">&quot;eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzIjoyLCJ0IjoidyIsImQiOiJmNzlhZTNjMS1lYWMwLTQ5ZTEtYTAxMC1mODMwMDBhZDUwNzkiLCJsIjoiaHR0cHM6Ly9hc3NldHMuaGNhcHRjaGEuY29tL2MvOWI5MmE0MSIsImUiOjE2MDE4NzEzMzB9.cmVLK5gY0PbD-vhjfJxPXYh72yfHkYWo1VMFozzn0jU&quot;</span></span><br><span class="line">   }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li>
<li>Al hacer click en Consultar, se hace una petici&#xF3;n a <em><a target="_blank" rel="noopener" href="https://api.servel.cl/private/registro/v2">https://api.servel.cl/private/registro/v2</a></em>, con los siguientes parametros (RUT sin digito verificador y UUID de hCaptcha)<figure class="highlight json hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">   <span class="hljs-attr">&quot;cedula&quot;</span>:<span class="hljs-string">&quot;5126663&quot;</span>,</span><br><span class="line">   <span class="hljs-attr">&quot;response&quot;</span>:<span class="hljs-string">&quot;W0_eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJwYXNza2V5IjoiT0hna3JJMFBIa0IwL2RKUGgvLzRxZEFaVUxUYTd1eUFNVmlYWCtWK1Ztc2tNQ3Jxa2VoWXNJelNjdHBOR3V6dWJ6d0MrU2k5bHRlaVB6b0o2bEk2b3dXb2N1amxCcDg4dXU2NHVVclhKOVRHcFFXVEg2cWFScmFuUzg2QUZNMXAxVUJnSHFwQ2lXRks4dnN5NnRiRUwzY250VGZuWDZmSnFHZ0hpdnM2bng2Y3NVMGttLys0K3RyZGJuWmp5Ym5TcWN4R1U4ZEQzRXppT0tZVU5iUC9keGhKQmNndHFRUzFzTEhybXh1MnZYY1haU3N5TGFaRmhMaUQ4V09BdEE2QXVMVDBReEpOUXowbEJTeDk0L3BMTkZrSk1NdzdBQXJMQmx5Mi9KbFJnd1F2ZnpuaEk1RmVFL0FMOU1CbFQvanNLclNsN0YycTNKcVVrdEYrbCttM0l2MURTR05pa2JhUlFJdWs3S2RudUQ4emRsSFU3Si9Bay9jREFpeXFVTitlbEVHUTB4SFppR0xaeTI1c2F6b2ZkdmdJcDhSQ1NIbHZYUkg0cEhaaWIxY0Jua0oxIiwic2l0ZWtleSI6ImY3OWFlM2MxLWVhYzAtNDllMS1hMDEwLWY4MzAwMGFkNTA3OSIsImV4cCI6MTYwMTg3MTIxMCwicGQiOjB9.EuTcPg2XFSCeu3PJLPsoV-fnxnkAQtgJcC8AAiAkKxU&quot;</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li>
<li>Si es exitoso, la API te entregar&#xE1;, en JSON, los datos electorales del RUT<figure class="highlight json hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">   <span class="hljs-attr">&quot;statusCode&quot;</span>:<span class="hljs-number">200</span>,</span><br><span class="line">   <span class="hljs-attr">&quot;datos&quot;</span>:{</span><br><span class="line">      <span class="hljs-attr">&quot;cedula&quot;</span>:<span class="hljs-string">&quot;5126663&quot;</span>,</span><br><span class="line">      <span class="hljs-attr">&quot;dv&quot;</span>:<span class="hljs-string">&quot;3&quot;</span>,</span><br><span class="line">      <span class="hljs-attr">&quot;nombre&quot;</span>:<span class="hljs-string">&quot;MIGUEL JUAN SEBASTIAN PI&#xD1;ERA ECHENIQUE&quot;</span>,</span><br><span class="line">      <span class="hljs-attr">&quot;sexo&quot;</span>:<span class="hljs-string">&quot;V&quot;</span>,</span><br><span class="line">      <span class="hljs-attr">&quot;tipomesa&quot;</span>:<span class="hljs-string">&quot;V&quot;</span>,</span><br><span class="line">      <span class="hljs-attr">&quot;codigo_circuns&quot;</span>:<span class="hljs-number">202</span>,</span><br><span class="line">      <span class="hljs-attr">&quot;numero_mesa&quot;</span>:<span class="hljs-number">149</span>,</span><br><span class="line">      <span class="hljs-attr">&quot;fusion&quot;</span>:<span class="hljs-number">149</span>,</span><br><span class="line">      <span class="hljs-attr">&quot;mesa_fusion&quot;</span>:<span class="hljs-string">&quot;149V&quot;</span>,</span><br><span class="line">      <span class="hljs-attr">&quot;estado_sufragio&quot;</span>:<span class="hljs-string">&quot;S&#xCD;&quot;</span>,</span><br><span class="line">      <span class="hljs-attr">&quot;nombre_circuns&quot;</span>:<span class="hljs-string">&quot;APOQUINDO&quot;</span>,</span><br><span class="line">      <span class="hljs-attr">&quot;nombre_comuna&quot;</span>:<span class="hljs-string">&quot;LAS CONDES&quot;</span>,</span><br><span class="line">      <span class="hljs-attr">&quot;nombre_provincia&quot;</span>:<span class="hljs-string">&quot;SANTIAGO&quot;</span>,</span><br><span class="line">      <span class="hljs-attr">&quot;numero_region&quot;</span>:<span class="hljs-number">13</span>,</span><br><span class="line">      <span class="hljs-attr">&quot;nombre_region&quot;</span>:<span class="hljs-string">&quot;METROPOLITANA DE SANTIAGO&quot;</span>,</span><br><span class="line">      <span class="hljs-attr">&quot;codigo_pais&quot;</span>:<span class="hljs-string">&quot;CL&quot;</span>,</span><br><span class="line">      <span class="hljs-attr">&quot;glosa_pais&quot;</span>:<span class="hljs-string">&quot;CHILE&quot;</span>,</span><br><span class="line">      <span class="hljs-attr">&quot;codigo_local&quot;</span>:<span class="hljs-string">&quot;131442&quot;</span>,</span><br><span class="line">      <span class="hljs-attr">&quot;nombre_local&quot;</span>:<span class="hljs-string">&quot;COLEGIO SAN FRANCISCO LOS DOMINICOS LOCAL: 2&quot;</span>,</span><br><span class="line">      <span class="hljs-attr">&quot;direccion_local&quot;</span>:<span class="hljs-string">&quot;AVENIDA COLON 9140&quot;</span>,</span><br><span class="line">      <span class="hljs-attr">&quot;codigo_colegio&quot;</span>:<span class="hljs-string">&quot;13037&quot;</span>,</span><br><span class="line">      <span class="hljs-attr">&quot;nombre_colegio&quot;</span>:<span class="hljs-string">&quot;COLEGIO ALCAZAR DE LAS CONDES&quot;</span>,</span><br><span class="line">      <span class="hljs-attr">&quot;direccion_colegio&quot;</span>:<span class="hljs-string">&quot;ALONSO DE CORDOVA 4751&quot;</span>,</span><br><span class="line">      <span class="hljs-attr">&quot;vocal&quot;</span>:<span class="hljs-string">&quot;NO&quot;</span>,</span><br><span class="line">      <span class="hljs-attr">&quot;miembro&quot;</span>:<span class="hljs-string">&quot;NO&quot;</span></span><br><span class="line">   }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

</li>
</ol>
<h2 id="Funcionalidad-y-extraccion-de-datos-con-la-API-de-la-app"><a href="#Funcionalidad-y-extraccion-de-datos-con-la-API-de-la-app" class="headerlink" title="Funcionalidad y extracci&#xF3;n de datos con la API de la app"></a>Funcionalidad y extracci&#xF3;n de datos con la API de la app</h2><ol>
<li><p>Al ingresar a la app (yo he hecho el ingreso con un iPhone 6, iOS 12.4.8), esta hace una petici&#xF3;n a <a target="_blank" rel="noopener" href="https://device-provisioning.googleapis.com/">https://device-provisioning.googleapis.com</a>, con user-agent <em>&#x201C;servelapp2020/1.20.17 CFNetwork/978.0.7 Darwin/18.7.0&#x201D;</em> (para reconocer la aplicaci&#xF3;n) entregando datos del dispositivo.</p>
<figure class="highlight json hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">	<span class="hljs-attr">&quot;locale&quot;</span>: <span class="hljs-string">&quot;en&quot;</span>,</span><br><span class="line">	<span class="hljs-attr">&quot;digest&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,</span><br><span class="line">	<span class="hljs-attr">&quot;checkin&quot;</span>: {</span><br><span class="line">		<span class="hljs-attr">&quot;iosbuild&quot;</span>: {</span><br><span class="line">			<span class="hljs-attr">&quot;model&quot;</span>: <span class="hljs-string">&quot;iPhone7,2&quot;</span>,</span><br><span class="line">			<span class="hljs-attr">&quot;os_version&quot;</span>: <span class="hljs-string">&quot;IOS_12.4.8&quot;</span></span><br><span class="line">		},</span><br><span class="line">		<span class="hljs-attr">&quot;last_checkin_msec&quot;</span>: <span class="hljs-number">0</span>,</span><br><span class="line">		<span class="hljs-attr">&quot;user_number&quot;</span>: <span class="hljs-number">0</span>,</span><br><span class="line">		<span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-number">2</span></span><br><span class="line">	},</span><br><span class="line">	<span class="hljs-attr">&quot;time_zone&quot;</span>: <span class="hljs-string">&quot;America\/Santiago&quot;</span>,</span><br><span class="line">	<span class="hljs-attr">&quot;user_serial_number&quot;</span>: <span class="hljs-number">0</span>,</span><br><span class="line">	<span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-number">0</span>,</span><br><span class="line">	<span class="hljs-attr">&quot;version&quot;</span>: <span class="hljs-number">2</span>,</span><br><span class="line">	<span class="hljs-attr">&quot;security_token&quot;</span>: <span class="hljs-number">0</span>,</span><br><span class="line">	<span class="hljs-attr">&quot;fragment&quot;</span>: <span class="hljs-number">0</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>En cURL:</p>
<figure class="highlight bash hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -H <span class="hljs-string">&apos;Host: device-provisioning.googleapis.com&apos;</span> -H <span class="hljs-string">&apos;accept: */*&apos;</span> -H <span class="hljs-string">&apos;content-type: application/json&apos;</span> -H <span class="hljs-string">&apos;user-agent: servelapp2020/1.20.17 CFNetwork/978.0.7 Darwin/18.7.0&apos;</span> -H <span class="hljs-string">&apos;accept-language: en-us&apos;</span> --data-binary <span class="hljs-string">&apos;{&quot;locale&quot;:&quot;en&quot;,&quot;digest&quot;:&quot;&quot;,&quot;checkin&quot;:{&quot;iosbuild&quot;:{&quot;model&quot;:&quot;iPhone7,2&quot;,&quot;os_version&quot;:&quot;IOS_12.4.8&quot;},&quot;last_checkin_msec&quot;:0,&quot;user_number&quot;:0,&quot;type&quot;:2},&quot;time_zone&quot;:&quot;America\/Santiago&quot;,&quot;user_serial_number&quot;:0,&quot;id&quot;:0,&quot;version&quot;:2,&quot;security_token&quot;:0,&quot;fragment&quot;:0}&apos;</span> --compressed <span class="hljs-string">&apos;https://device-provisioning.googleapis.com/checkin&apos;</span></span><br></pre></td></tr></tbody></table></figure>
<p>El servidor, como respuesta, hace la aprobaci&#xF3;n de seguridad, confirmando el dispositivo, y entregando tokens y strings. De esta, son los strings <i>security_token</i>, <i>version_info</i>, y <i>android_id</i> los que nos servir&#xE1;n como autenticaci&#xF3;n para la API.</p>
<figure class="highlight json hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">	<span class="hljs-attr">&quot;device_data_version_info&quot;</span>: <span class="hljs-string">&quot;ABFEt1VTTekDcnAhNXPvy6BZ7tuMtDPrdIQ5vSRdeYVUcZAideWHReuDNoWV2gw18eIzWI4jWdUsh8QU6aiJc46Atdohcf7EgcOSxDJfx-OtcuBmtsiacLb0qawlDQcpo8Njk9qbtrXru0rnva_XvuzhlCctnnlIukcGulabQvN6jmxoRXXIhpJELuaUXC9rVnYhE2tVkyqWP4tvesAVA-6Ti84vDT2vqHsivwZzfnGPlgxPO2xAj4M0CAo6GGjL2V5CmQuPukcAcGJxQdKFSIx0JlBNWQX3CcB-XXD-Xq0L7CkH8iiwWnWEVJk-9GaE0xAOOzXrb8tvkjiLem5gn1xHQbPiujUx2l19TPMZl2foHGQG01263kk&quot;</span>,</span><br><span class="line">	<span class="hljs-attr">&quot;stats_ok&quot;</span>: <span class="hljs-literal">true</span>,</span><br><span class="line">	<span class="hljs-attr">&quot;security_token&quot;</span>: <span class="hljs-number">6383701952383370585</span>,</span><br><span class="line">	<span class="hljs-attr">&quot;digest&quot;</span>: <span class="hljs-string">&quot;mxJv2zxaXADwB0xiQqwgGg\u003d\u003d&quot;</span>,</span><br><span class="line">	<span class="hljs-attr">&quot;time_msec&quot;</span>: <span class="hljs-number">1601915127764</span>,</span><br><span class="line">	<span class="hljs-attr">&quot;version_info&quot;</span>: <span class="hljs-string">&quot;M778Po2V600ZENW7sZq6nvlCeFCZTxc&quot;</span>,</span><br><span class="line">	<span class="hljs-attr">&quot;android_id&quot;</span>: <span class="hljs-number">4883965058536125901</span>,</span><br><span class="line">	<span class="hljs-attr">&quot;setting&quot;</span>: [{</span><br><span class="line">		<span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;android_id&quot;</span>,</span><br><span class="line">		<span class="hljs-attr">&quot;value&quot;</span>: <span class="hljs-string">&quot;4883965058536125901&quot;</span></span><br><span class="line">	}, {</span><br><span class="line">		<span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;device_country&quot;</span>,</span><br><span class="line">		<span class="hljs-attr">&quot;value&quot;</span>: <span class="hljs-string">&quot;cl&quot;</span></span><br><span class="line">	}, {</span><br><span class="line">		<span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;device_registration_time&quot;</span>,</span><br><span class="line">		<span class="hljs-attr">&quot;value&quot;</span>: <span class="hljs-string">&quot;1601913600000&quot;</span></span><br><span class="line">	}, {</span><br><span class="line">		<span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;ios_device&quot;</span>,</span><br><span class="line">		<span class="hljs-attr">&quot;value&quot;</span>: <span class="hljs-string">&quot;1&quot;</span></span><br><span class="line">	}]</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>Al mismo tiempo, se hace una petici&#xF3;n a <em><a target="_blank" rel="noopener" href="https://https//firebaseinstallations.googleapis.com/v1/projects/servelciudadano/installations/">https://https://firebaseinstallations.googleapis.com/v1/projects/servelciudadano/installations/</a></em>, especificando mas datos de la aplicaci&#xF3;n. Desde esta petici&#xF3;n, <i>appId</i> y <i>fid</i> se usar&#xE1;n en la autenticaci&#xF3;n de la API.</p>
<figure class="highlight json hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">	<span class="hljs-attr">&quot;appId&quot;</span>: <span class="hljs-string">&quot;1:507517598050:ios:d03b8533eec1c345&quot;</span>,</span><br><span class="line">	<span class="hljs-attr">&quot;fid&quot;</span>: <span class="hljs-string">&quot;e7EncfKdiUWQttT04VCand&quot;</span>, </span><br><span class="line">	<span class="hljs-attr">&quot;authVersion&quot;</span>: <span class="hljs-string">&quot;FIS_v2&quot;</span>,</span><br><span class="line">	<span class="hljs-attr">&quot;sdkVersion&quot;</span>: <span class="hljs-string">&quot;i:1.1.0&quot;</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>En cURL:</p>
<figure class="highlight bash hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -H <span class="hljs-string">&apos;Host: firebaseinstallations.googleapis.com&apos;</span> -H <span class="hljs-string">&apos;content-type: application/json&apos;</span> -H <span class="hljs-string">&apos;accept: */*&apos;</span> -H <span class="hljs-string">&apos;x-firebase-client: apple-sdk/18A390 fire-analytics/6.2.2 fire-fcm/4.2.1 fire-iid/4.3.1 fire-install/1.1.0 fire-ios/6.6.1 swift/true xcode/12A7300&apos;</span> -H <span class="hljs-string">&apos;x-firebase-client-log-type: 3&apos;</span> -H <span class="hljs-string">&apos;x-ios-bundle-identifier: com.Adexus.ServelCiudadano&apos;</span> -H <span class="hljs-string">&apos;accept-language: en-us&apos;</span> -H <span class="hljs-string">&apos;x-goog-api-key: AIzaSyB2X9DSkjsyoQjEkoHjDFj5z1Zs6DXUgAc&apos;</span> -H <span class="hljs-string">&apos;user-agent: servelapp2020/1.20.17 CFNetwork/978.0.7 Darwin/18.7.0&apos;</span> --data-binary <span class="hljs-string">&apos;{&quot;appId&quot;:&quot;1:507517598050:ios:d03b8533eec1c345&quot;,&quot;fid&quot;:&quot;e7EncfKdiUWQttT04VCand&quot;,&quot;authVersion&quot;:&quot;FIS_v2&quot;,&quot;sdkVersion&quot;:&quot;i:1.1.0&quot;}&apos;</span> --compressed <span class="hljs-string">&apos;https://firebaseinstallations.googleapis.com/v1/projects/servelciudadano/installations/&apos;</span></span><br></pre></td></tr></tbody></table></figure>
<p>Esta petici&#xF3;n devolver&#xE1;, entre m&#xE1;s informaci&#xF3;n, un token/authToken, que tiene expiraci&#xF3;n de 1 semana, y que tambien ser&#xE1; parte de la autenticaci&#xF3;n a la API.</p>
<figure class="highlight json hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">	<span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;projects/507517598050/installations/e7EncfKdiUWQttT04VCand&quot;</span>,</span><br><span class="line">	<span class="hljs-attr">&quot;fid&quot;</span>: <span class="hljs-string">&quot;e7EncfKdiUWQttT04VCand&quot;</span>,</span><br><span class="line">	<span class="hljs-attr">&quot;refreshToken&quot;</span>: <span class="hljs-string">&quot;2_L3tpHZWs-QoBNhT86Hkj1Md_utIliPVlWT-3bdG69Vn2lRdQoV6vmm_7KckFnuV2&quot;</span>,</span><br><span class="line">	<span class="hljs-attr">&quot;authToken&quot;</span>: {</span><br><span class="line">		<span class="hljs-attr">&quot;token&quot;</span>: <span class="hljs-string">&quot;eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCJ9.eyJmaWQiOiJlN0VuY2ZLZGlVV1F0dFQwNFZDYW5kIiwicHJvamVjdE51bWJlciI6NTA3NTE3NTk4MDUwLCJleHAiOjE2MDI1MTk5MjgsImFwcElkIjoiMTo1MDc1MTc1OTgwNTA6aW9zOmQwM2I4NTMzZWVjMWMzNDUifQ.AB2LPV8wRAIgHPJgdMZIWMQTaHvsyuLorXK1uLh0yCg5f1tFMVcVahYCIB4JXB4-IaFLF5Jv1vT34rQf3jTsYnva0uCwFTCiUMcp&quot;</span>,</span><br><span class="line">		<span class="hljs-attr">&quot;expiresIn&quot;</span>: <span class="hljs-string">&quot;604800s&quot;</span></span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>Se hace una petici&#xF3;n POST a <em><a target="_blank" rel="noopener" href="https://fcmtoken.googleapis.com/register">https://fcmtoken.googleapis.com/register</a></em>, con los siguientes datos:</p>
</li>
</ol>
<ul>
<li>Primer paso<ul>
<li><i>android_id</i></li>
<li><i>version_info</i></li>
<li><i>security_token</i></li>
</ul>
</li>
<li>Segundo paso<ul>
<li><i>appId</i></li>
<li><i>fid</i></li>
<li><i>token</i> (response)<figure class="highlight plain hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">:method: POST</span><br><span class="line">:scheme: https</span><br><span class="line">:path: /register</span><br><span class="line">:authority: fcmtoken.googleapis.com</span><br><span class="line">content-type: application/x-www-form-urlencoded</span><br><span class="line">accept: */*</span><br><span class="line">x-firebase-client: apple-sdk/18A390 fire-analytics/6.2.2 fire-fcm/4.2.1 fire-iid/4.3.1 fire-install/1.1.0 fire-ios/6.6.1 swift/true xcode/12A7300</span><br><span class="line">authorization: AidLogin 4883965058536125901:6383701952383370585</span><br><span class="line">x-firebase-client-log-type: 1</span><br><span class="line">accept-language: en-us</span><br><span class="line">app: com.Adexus.ServelCiudadano</span><br><span class="line">accept-encoding: br, gzip, deflate</span><br><span class="line">content-length: 240</span><br><span class="line">user-agent: servelapp2020/1.20.17 CFNetwork/978.0.7 Darwin/18.7.0</span><br><span class="line">info: M778Po2V600ZENW7sZq6nvlCeFCZTxc</span><br><span class="line">x-goog-firebase-installations-auth: eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCJ9.eyJmaWQiOiJlN0VuY2ZLZGlVV1F0dFQwNFZDYW5kIiwicHJvamVjdE51bWJlciI6NTA3NTE3NTk4MDUwLCJleHAiOjE2MDI1MTk5MjgsImFwcElkIjoiMTo1MDc1MTc1OTgwNTA6aW9zOmQwM2I4NTMzZWVjMWMzNDUifQ.AB2LPV8wRAIgHPJgdMZIWMQTaHvsyuLorXK1uLh0yCg5f1tFMVcVahYCIB4JXB4-IaFLF5Jv1vT34rQf3jTsYnva0uCwFTCiUMcp</span><br><span class="line"></span><br><span class="line">X-osv=12.4.8&amp;device=4883965058536125901&amp;X-scope=*&amp;plat=2&amp;app=com.Adexus.ServelCiudadano&amp;app_ver=1.20.17&amp;X-cliv=fiid-4.2.1&amp;sender=507517598050&amp;X-subtype=507517598050&amp;appid=e7EncfKdiUWQttT04VCand&amp;gmp_app_id=1:507517598050:ios:d03b8533eec1c345</span><br></pre></td></tr></tbody></table></figure>
En cURL:<figure class="highlight bash hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -H <span class="hljs-string">&apos;Host: fcmtoken.googleapis.com&apos;</span> -H <span class="hljs-string">&apos;content-type: application/x-www-form-urlencoded&apos;</span> -H <span class="hljs-string">&apos;accept: */*&apos;</span> -H <span class="hljs-string">&apos;x-firebase-client: apple-sdk/18A390 fire-analytics/6.2.2 fire-fcm/4.2.1 fire-iid/4.3.1 fire-install/1.1.0 fire-ios/6.6.1 swift/true xcode/12A7300&apos;</span> -H <span class="hljs-string">&apos;authorization: AidLogin 4883965058536125901:6383701952383370585&apos;</span> -H <span class="hljs-string">&apos;x-firebase-client-log-type: 1&apos;</span> -H <span class="hljs-string">&apos;accept-language: en-us&apos;</span> -H <span class="hljs-string">&apos;app: com.Adexus.ServelCiudadano&apos;</span> -H <span class="hljs-string">&apos;user-agent: servelapp2020/1.20.17 CFNetwork/978.0.7 Darwin/18.7.0&apos;</span> -H <span class="hljs-string">&apos;info: M778Po2V600ZENW7sZq6nvlCeFCZTxc&apos;</span> -H <span class="hljs-string">&apos;x-goog-firebase-installations-auth: eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCJ9.eyJmaWQiOiJlN0VuY2ZLZGlVV1F0dFQwNFZDYW5kIiwicHJvamVjdE51bWJlciI6NTA3NTE3NTk4MDUwLCJleHAiOjE2MDI1MTk5MjgsImFwcElkIjoiMTo1MDc1MTc1OTgwNTA6aW9zOmQwM2I4NTMzZWVjMWMzNDUifQ.AB2LPV8wRAIgHPJgdMZIWMQTaHvsyuLorXK1uLh0yCg5f1tFMVcVahYCIB4JXB4-IaFLF5Jv1vT34rQf3jTsYnva0uCwFTCiUMcp&apos;</span> --data-binary <span class="hljs-string">&quot;X-osv=12.4.8&amp;device=4883965058536125901&amp;X-scope=*&amp;plat=2&amp;app=com.Adexus.ServelCiudadano&amp;app_ver=1.20.17&amp;X-cliv=fiid-4.2.1&amp;sender=507517598050&amp;X-subtype=507517598050&amp;appid=e7EncfKdiUWQttT04VCand&amp;gmp_app_id=1:507517598050:ios:d03b8533eec1c345&quot;</span> --compressed <span class="hljs-string">&apos;https://fcmtoken.googleapis.com/register&apos;</span></span><br></pre></td></tr></tbody></table></figure>
La respuesta a esta petici&#xF3;n, ser&#xE1; un token necesario para hacer, finalmente, la primera de dos peticiones API al servidor de servel.<figure class="highlight plain hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">token=e7EncfKdiUWQttT04VCand:APA91bF88vXmjzkeDEW3pR-pZP0nSBXEb9DX3MPrEugIt2_lVQg2jBJe1_ltWhRgrL1gIpZjV5JKd5r4dh</span><br><span class="line">2XeChO1mOhidnY0zPh29mhUvCYTInpYAlvwrVVJhctMOiAZMSAaRU6ddng</span><br></pre></td></tr></tbody></table></figure>
</li>
</ul>
</li>
</ul>
<ol start="4">
<li><p>Se hace una petici&#xF3;n a <em><a target="_blank" rel="noopener" href="https://apiapp.servelelecciones.cl/ServelCiudadanoBackend/api/auth/getToken">https://apiapp.servelelecciones.cl/ServelCiudadanoBackend/api/auth/getToken</a></em>, con parametros <em>rut</em> (que ser&#xE1; modificado con el RUT por consultar, sin puntos ni digito verificador), y <em>deviceToken</em>, que es el sobrenombre de <em>token</em> de la respuesta de la petici&#xF3;n en el paso 3.</p>
<figure class="highlight json hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">	<span class="hljs-attr">&quot;rut&quot;</span>: <span class="hljs-string">&quot;5126663&quot;</span>,</span><br><span class="line">	<span class="hljs-attr">&quot;deviceToken&quot;</span>: <span class="hljs-string">&quot;e7EncfKdiUWQttT04VCand:APA91bF88vXmjzkeDEW3pR-pZP0nSBXEb9DX3MPrEugIt2_lVQg2jBJe1_ltWhRgrL1gIpZjV5JKd5r4dh2XeChO1mOhidnY0zPh29mhUvCYTInpYAlvwrVVJhctMOiAZMSAaRU6ddng&quot;</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>En cURL:</p>
<figure class="highlight bash hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -H <span class="hljs-string">&apos;Host: apiapp.servelelecciones.cl&apos;</span> -H <span class="hljs-string">&apos;accept: application/json, text/plain, */*&apos;</span> -H <span class="hljs-string">&apos;content-type: application/json&apos;</span> -H <span class="hljs-string">&apos;user-agent: Mozilla/5.0 (iPhone; CPU OS 12_4.8 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/12.4.8 Mobile/10A5355d Safari/8536.25&apos;</span> -H <span class="hljs-string">&apos;accept-language: en-us&apos;</span> --data-binary <span class="hljs-string">&apos;{&quot;rut&quot;:&quot;5126663&quot;,&quot;deviceToken&quot;:&quot;e7EncfKdiUWQttT04VCand:APA91bF88vXmjzkeDEW3pR-pZP0nSBXEb9DX3MPrEugIt2_lVQg2jBJe1_ltWhRgrL1gIpZjV5JKd5r4dh2XeChO1mOhidnY0zPh29mhUvCYTInpYAlvwrVVJhctMOiAZMSAaRU6ddng&quot;}&apos;</span> --compressed <span class="hljs-string">&apos;https://apiapp.servelelecciones.cl/ServelCiudadanoBackend/api/auth/getToken&apos;</span></span><br></pre></td></tr></tbody></table></figure>
<p>Como respuesta, el servidor nos generar&#xE1; un token, el cual representa al RUT y token entregados en la petici&#xF3;n</p>
<figure class="highlight json hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">	<span class="hljs-attr">&quot;token&quot;</span>: <span class="hljs-string">&quot;eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzUxMiJ9.eyJzdWIiOiI1MTI2NjYzIiwiZXhwIjoxNjA5NjkxMTQyLCJqdGkiOiI0NzdlNzM1MC00N2EwLTRhN2ItOTFiYy1kYzZjOGFhMjAyZDkifQ.U68HBZDR7VJjp-vqf9jrMt8Fx8I4-OXzsMruT9OWo12J0hBGRj6lZ5cCfTKn7dpv6RF_FLmmzf-eCOFFgvQMMrttIMU_xjLJSMvQLTh02NM84UoRzKJqVmnGT9d15IDQ-jYWWFTHPTqgeSexqjYcEiNWduTRrHAWhFwMkfMv0CJFxc9HR8NHE_yFNFxSdBDcGqrdJ8yQBxsI2KdJN4BJF-YXZIpMdKozGZOq25XtwLVeEsaJhIaOIPhNJI_8hT4TA_Gajju1IElIQq6w2SSFrWGq7_FC8Q4PdZwGe6ZCeA3Do6F76AEymsFORIqsb8-SWrL-gYsb_jdXFtWORIazSg&quot;</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>Se hace una petici&#xF3;n a <em><a target="_blank" rel="noopener" href="https://apiapp.servelelecciones.cl/ServelCiudadanoBackend/api/private/CiudadanoRestService/CiudadanoInfo">https://apiapp.servelelecciones.cl/ServelCiudadanoBackend/api/private/CiudadanoRestService/CiudadanoInfo</a></em>, con header de autorizaci&#xF3;n &#x201C;Bearer (token del paso 4)&#x201D;</p>
<figure class="highlight bash hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -H <span class="hljs-string">&apos;Host: apiapp.servelelecciones.cl&apos;</span> -H <span class="hljs-string">&apos;accept: application/json, text/plain, */*&apos;</span> -H <span class="hljs-string">&apos;content-type: application/json&apos;</span> -H <span class="hljs-string">&apos;accept-language: en-us&apos;</span> -H <span class="hljs-string">&apos;user-agent: Mozilla/5.0 (iPhone; CPU OS 12_4.8 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/12.4.8 Mobile/10A5355d Safari/8536.25&apos;</span> -H <span class="hljs-string">&apos;authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzUxMiJ9.eyJzdWIiOiI1MTI2NjYzIiwiZXhwIjoxNjA5NjkxMTQyLCJqdGkiOiI0NzdlNzM1MC00N2EwLTRhN2ItOTFiYy1kYzZjOGFhMjAyZDkifQ.U68HBZDR7VJjp-vqf9jrMt8Fx8I4-OXzsMruT9OWo12J0hBGRj6lZ5cCfTKn7dpv6RF_FLmmzf-eCOFFgvQMMrttIMU_xjLJSMvQLTh02NM84UoRzKJqVmnGT9d15IDQ-jYWWFTHPTqgeSexqjYcEiNWduTRrHAWhFwMkfMv0CJFxc9HR8NHE_yFNFxSdBDcGqrdJ8yQBxsI2KdJN4BJF-YXZIpMdKozGZOq25XtwLVeEsaJhIaOIPhNJI_8hT4TA_Gajju1IElIQq6w2SSFrWGq7_FC8Q4PdZwGe6ZCeA3Do6F76AEymsFORIqsb8-SWrL-gYsb_jdXFtWORIazSg&apos;</span> --data-binary <span class="hljs-string">&apos;{&quot;timestamp&quot;:0}&apos;</span> --compressed <span class="hljs-string">&apos;https://apiapp.servelelecciones.cl/ServelCiudadanoBackend/api/private/CiudadanoRestService/CiudadanoInfo&apos;</span></span><br></pre></td></tr></tbody></table></figure>
<p>Como respuesta, tendremos, en JSON, los datos electorales del RUT solicitado.</p>
<figure class="highlight json hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">	<span class="hljs-attr">&quot;timestamp&quot;</span>: <span class="hljs-number">1601694000000</span>,</span><br><span class="line">	<span class="hljs-attr">&quot;ciudadano&quot;</span>: {</span><br><span class="line">		<span class="hljs-attr">&quot;region&quot;</span>: <span class="hljs-string">&quot;METROPOLITANA DE SANTIAGO&quot;</span>,</span><br><span class="line">		<span class="hljs-attr">&quot;rut&quot;</span>: <span class="hljs-string">&quot;5126663-3&quot;</span>,</span><br><span class="line">		<span class="hljs-attr">&quot;circElectoral&quot;</span>: <span class="hljs-string">&quot;APOQUINDO&quot;</span>,</span><br><span class="line">		<span class="hljs-attr">&quot;nombre&quot;</span>: <span class="hljs-string">&quot;MIGUEL JUAN SEBASTIAN PI&#xD1;ERA ECHENIQUE&quot;</span>,</span><br><span class="line">		<span class="hljs-attr">&quot;comuna&quot;</span>: <span class="hljs-string">&quot;LAS CONDES&quot;</span>,</span><br><span class="line">		<span class="hljs-attr">&quot;mesa&quot;</span>: <span class="hljs-string">&quot;149V&quot;</span>,</span><br><span class="line">		<span class="hljs-attr">&quot;pais&quot;</span>: <span class="hljs-string">&quot;CHILE&quot;</span>,</span><br><span class="line">		<span class="hljs-attr">&quot;provincia&quot;</span>: <span class="hljs-string">&quot;SANTIAGO&quot;</span>,</span><br><span class="line">		<span class="hljs-attr">&quot;local&quot;</span>: {</span><br><span class="line">			<span class="hljs-attr">&quot;codigo&quot;</span>: <span class="hljs-string">&quot;0&quot;</span>,</span><br><span class="line">			<span class="hljs-attr">&quot;nombre&quot;</span>: <span class="hljs-string">&quot;COLEGIO SAN FRANCISCO LOS DOMINICOS LOCAL: 2&quot;</span>,</span><br><span class="line">			<span class="hljs-attr">&quot;ubicacion&quot;</span>: <span class="hljs-string">&quot;AVENIDA COLON 9140&quot;</span>,</span><br><span class="line">			<span class="hljs-attr">&quot;lat&quot;</span>: <span class="hljs-string">&quot;-33,416&quot;</span>,</span><br><span class="line">			<span class="hljs-attr">&quot;lng&quot;</span>: <span class="hljs-string">&quot;-70,539&quot;</span></span><br><span class="line">		},</span><br><span class="line">		<span class="hljs-attr">&quot;puedesufragar&quot;</span>: <span class="hljs-string">&quot;SI&quot;</span>,</span><br><span class="line">		<span class="hljs-attr">&quot;esmiembro&quot;</span>: <span class="hljs-string">&quot;NO&quot;</span>,</span><br><span class="line">		<span class="hljs-attr">&quot;nombrecolegio&quot;</span>: <span class="hljs-string">&quot;COLEGIO ALCAZAR DE LAS CONDES&quot;</span>,</span><br><span class="line">		<span class="hljs-attr">&quot;ubicacioncolegio&quot;</span>: <span class="hljs-string">&quot;ALONSO DE CORDOVA 4751&quot;</span>,</span><br><span class="line">		<span class="hljs-attr">&quot;esvocal&quot;</span>: <span class="hljs-string">&quot;NO&quot;</span>,</span><br><span class="line">		<span class="hljs-attr">&quot;verlocal&quot;</span>: <span class="hljs-string">&quot;SI&quot;</span>,</span><br><span class="line">		<span class="hljs-attr">&quot;codigocprovApp&quot;</span>: <span class="hljs-string">&quot;0&quot;</span>,</span><br><span class="line">		<span class="hljs-attr">&quot;codigocsenApp&quot;</span>: <span class="hljs-string">&quot;0&quot;</span>,</span><br><span class="line">		<span class="hljs-attr">&quot;codigodistApp&quot;</span>: <span class="hljs-string">&quot;0&quot;</span>,</span><br><span class="line">		<span class="hljs-attr">&quot;codigoglobalApp&quot;</span>: <span class="hljs-string">&quot;0&quot;</span>,</span><br><span class="line">		<span class="hljs-attr">&quot;verdesginacion&quot;</span>: <span class="hljs-string">&quot;SI&quot;</span></span><br><span class="line">	},</span><br><span class="line">	<span class="hljs-attr">&quot;noticias&quot;</span>: <span class="hljs-literal">null</span>,</span><br><span class="line">	<span class="hljs-attr">&quot;enlaces&quot;</span>: <span class="hljs-literal">null</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

</li>
</ol>
<h2 id="Automatizar-y-obtener-informacion-desde-el-terminal"><a href="#Automatizar-y-obtener-informacion-desde-el-terminal" class="headerlink" title="Automatizar y obtener informaci&#xF3;n desde el terminal"></a>Automatizar y obtener informaci&#xF3;n desde el terminal</h2><p>Teniendo en cuenta que el token del servidor del Servel no es est&#xE1;tico (Cambia por RUT), y que las demas tokens duran m&#xE1;ximo 1 semana, despues de ejecutar todas las peticiones al menos una vez, se podr&#xE1; guardar la <em>token</em> del paso 3, y partir por el paso 4 y 5.</p>
<ol>
<li>En el paso 4, reemplaza el RUT por otro al cual consultar (sin puntos ni digito verificador), y usa el <em>token</em> del paso 3. Al comando, en el final, se le puede a&#xF1;adir <a target="_blank" rel="noopener" href="https://stedolan.github.io/jq/">jq</a> o <a target="_blank" rel="noopener" href="https://metacpan.org/pod/JSON::PP">json_pp</a>, para parsear el JSON correctamente y facilitar la obtenci&#xF3;n de datos. <figure class="highlight bash hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -H [PARAMETROS] | jq</span><br><span class="line">curl -H [PARAMETROS] | json_pp</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight bash hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -H <span class="hljs-string">&apos;Host: apiapp.servelelecciones.cl&apos;</span> -H <span class="hljs-string">&apos;accept: application/json, text/plain, */*&apos;</span> -H <span class="hljs-string">&apos;content-type: application/json&apos;</span> -H <span class="hljs-string">&apos;user-agent: Mozilla/5.0 (iPhone; CPU OS 12_4.8 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/12.4.8 Mobile/10A5355d Safari/8536.25&apos;</span> -H <span class="hljs-string">&apos;accept-language: en-us&apos;</span> --data-binary <span class="hljs-string">&apos;{&quot;rut&quot;:&quot;7052438&quot;,&quot;deviceToken&quot;:&quot;e7EncfKdiUWQttT04VCand:APA91bF88vXmjzkeDEW3pR-pZP0nSBXEb9DX3MPrEugIt2_lVQg2jBJe1_ltWhRgrL1gIpZjV5JKd5r4dh2XeChO1mOhidnY0zPh29mhUvCYTInpYAlvwrVVJhctMOiAZMSAaRU6ddng&quot;}&apos;</span> --compressed <span class="hljs-string">&apos;https://apiapp.servelelecciones.cl/ServelCiudadanoBackend/api/auth/getToken&apos;</span> | jq</span><br></pre></td></tr></tbody></table></figure>
Respuesta:<figure class="highlight json hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">   <span class="hljs-attr">&quot;token&quot;</span> : <span class="hljs-string">&quot;eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzUxMiJ9.eyJzdWIiOiI3MDUyNDM4IiwiZXhwIjoxNjA5Njk4MjM5LCJqdGkiOiJlNDMyODI0NC03MGU5LTQxNTUtOGMxYi1kMGYxNjUxYjcwYTEifQ.b68PG9j4n0Y90qpOk9lTQFF162ahG-Uus3E2Gifg_vGS14lKFZoszekbozpxUneWlb2w8nKloZFgNyWVPBrrq_md_frrpPem3SwGCcwg1n7EvM7YF-Aql71RgroPPexW2cD8dSj_W2wyAEQ9WY0y3WChjgaGFtN_VAxicDSuBkes-YzgDxWc6eH8qTl3kZ68si7w-rHwuRRldojyJ5wq8kChNJ6qY6TWm4OfvTCSMG02N3tG1mWmwgEo7nYm1EbaNbSJbfRQL_0MJV90Vxjsng8DxrJOz1IiZrrb0Ok-cSxHEDBJHtUtWQCyE3sfiz4QZH_UeIjdUNuN28SxPosaUw&quot;</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li>
<li>Usa el <em>token</em> para hacer la petici&#xF3;n y obtener los datos electorales. Tambien es posible usar <em>jq</em> o <em>jsonpp</em>.<figure class="highlight bash hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -H <span class="hljs-string">&apos;Host: apiapp.servelelecciones.cl&apos;</span> -H <span class="hljs-string">&apos;accept: application/json, text/plain, */*&apos;</span> -H <span class="hljs-string">&apos;content-type: application/json&apos;</span> -H <span class="hljs-string">&apos;accept-language: en-us&apos;</span> -H <span class="hljs-string">&apos;user-agent: Mozilla/5.0 (iPhone; CPU  OS 12_4.8 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/12.4.8 Mobile/10A5355d Sa fari/8536.25&apos;</span> -H <span class="hljs-string">&apos;authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzUxMiJ9.eyJzdWIiOiI3MDUyNDM4IiwiZXhwIjoxNjA5Njk4MjM5LCJqdGkiOiJlNDMyODI0NC03MGU5LTQxNTUtOGMxYi1kMGYxNjUxYjcwYTEifQ.b68PG9j4n0Y90qpOk9lTQFF162ahG-Uus3E2Gifg_vGS14lKFZoszekbozpxUneWlb2w8nKloZFgNyWVPBrrq_md_frrpPem3SwGCcwg1n7EvM7YF-Aql71RgroPPexW2cD8dSj_W2wyAEQ9WY0y3WChjgaGFtN_VAxicDSuBkes-YzgDxWc6eH8qTl3kZ68si7w-rHwuRRldojyJ5wq8kChNJ6qY6TWm4OfvTCSMG02N3tG1mWmwgEo7nYm1EbaNbSJbfRQL_0MJV90Vxjsng8DxrJOz1IiZrrb0Ok-cSxHEDBJHtUtWQCyE3sfiz4QZH_UeIjdUNuN28SxPosaUw&apos;</span> --data-binary <span class="hljs-string">&apos;{&quot;timestamp&quot;:0}&apos;</span> --compressed <span class="hljs-string">&apos;https://apiapp.servelelecciones.cl/ServelCiudadanoBackend/api/private/CiudadanoRestService/CiudadanoInfo&apos;</span> | jq</span><br></pre></td></tr></tbody></table></figure>
Respuesta:<figure class="highlight json hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="hljs-attr">&quot;timestamp&quot;</span>: <span class="hljs-number">1601694000000</span>,</span><br><span class="line">  <span class="hljs-attr">&quot;ciudadano&quot;</span>: {</span><br><span class="line">    <span class="hljs-attr">&quot;region&quot;</span>: <span class="hljs-string">&quot;METROPOLITANA DE SANTIAGO&quot;</span>,</span><br><span class="line">    <span class="hljs-attr">&quot;circElectoral&quot;</span>: <span class="hljs-string">&quot;APOQUINDO&quot;</span>,</span><br><span class="line">    <span class="hljs-attr">&quot;comuna&quot;</span>: <span class="hljs-string">&quot;LAS CONDES&quot;</span>,</span><br><span class="line">    <span class="hljs-attr">&quot;mesa&quot;</span>: <span class="hljs-string">&quot;189M&quot;</span>,</span><br><span class="line">    <span class="hljs-attr">&quot;nombre&quot;</span>: <span class="hljs-string">&quot;MARIA CECILIA MOREL MONTES&quot;</span>,</span><br><span class="line">    <span class="hljs-attr">&quot;pais&quot;</span>: <span class="hljs-string">&quot;CHILE&quot;</span>,</span><br><span class="line">    <span class="hljs-attr">&quot;provincia&quot;</span>: <span class="hljs-string">&quot;SANTIAGO&quot;</span>,</span><br><span class="line">    <span class="hljs-attr">&quot;rut&quot;</span>: <span class="hljs-string">&quot;7052438-4&quot;</span>,</span><br><span class="line">    <span class="hljs-attr">&quot;local&quot;</span>: {</span><br><span class="line">      <span class="hljs-attr">&quot;codigo&quot;</span>: <span class="hljs-string">&quot;0&quot;</span>,</span><br><span class="line">      <span class="hljs-attr">&quot;nombre&quot;</span>: <span class="hljs-string">&quot;COLEGIO DEL SAGRADO CORAZON DE APOQUINDO&quot;</span>,</span><br><span class="line">      <span class="hljs-attr">&quot;ubicacion&quot;</span>: <span class="hljs-string">&quot;SANTA MAGDALENA SOFIA 277&quot;</span>,</span><br><span class="line">      <span class="hljs-attr">&quot;lat&quot;</span>: <span class="hljs-string">&quot;-33,4101&quot;</span>,</span><br><span class="line">      <span class="hljs-attr">&quot;lng&quot;</span>: <span class="hljs-string">&quot;-70,5498&quot;</span></span><br><span class="line">    },</span><br><span class="line">    <span class="hljs-attr">&quot;puedesufragar&quot;</span>: <span class="hljs-string">&quot;SI&quot;</span>,</span><br><span class="line">    <span class="hljs-attr">&quot;esmiembro&quot;</span>: <span class="hljs-string">&quot;NO&quot;</span>,</span><br><span class="line">    <span class="hljs-attr">&quot;nombrecolegio&quot;</span>: <span class="hljs-string">&quot;COLEGIO ALCAZAR DE LAS CONDES&quot;</span>,</span><br><span class="line">    <span class="hljs-attr">&quot;ubicacioncolegio&quot;</span>: <span class="hljs-string">&quot;ALONSO DE CORDOVA 4751&quot;</span>,</span><br><span class="line">    <span class="hljs-attr">&quot;esvocal&quot;</span>: <span class="hljs-string">&quot;NO&quot;</span>,</span><br><span class="line">    <span class="hljs-attr">&quot;verlocal&quot;</span>: <span class="hljs-string">&quot;SI&quot;</span>,</span><br><span class="line">    <span class="hljs-attr">&quot;codigocprovApp&quot;</span>: <span class="hljs-string">&quot;0&quot;</span>,</span><br><span class="line">    <span class="hljs-attr">&quot;codigocsenApp&quot;</span>: <span class="hljs-string">&quot;0&quot;</span>,</span><br><span class="line">    <span class="hljs-attr">&quot;codigodistApp&quot;</span>: <span class="hljs-string">&quot;0&quot;</span>,</span><br><span class="line">    <span class="hljs-attr">&quot;codigoglobalApp&quot;</span>: <span class="hljs-string">&quot;0&quot;</span>,</span><br><span class="line">    <span class="hljs-attr">&quot;verdesginacion&quot;</span>: <span class="hljs-string">&quot;SI&quot;</span></span><br><span class="line">  },</span><br><span class="line">  <span class="hljs-attr">&quot;noticias&quot;</span>: <span class="hljs-literal">null</span>,</span><br><span class="line">  <span class="hljs-attr">&quot;enlaces&quot;</span>: <span class="hljs-literal">null</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

</li>
</ol>
</body></html>
    
    </div>
    
    <div class="columns is-variable is-1 is-multiline is-mobile">
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/blog/tags/Servel/">#Servel</a></span>
    
    </div>
    
    
</article>


<div class="sharebox">
    <!--from https://www.buttons.social--><script>document.write('<a href="https://www.facebook.com/sharer/sharer.php?u='+encodeURIComponent(document.URL)+'"target="_blank"title="Facebook"style="display:inline-block;vertical-align:middle;width:2em;height:2em;border-radius:50%;box-shadow:.1em .1em 0.26em rgba(0,0,0,.3);background:#4f4f4f;"><svg style="display:block;fill:#ffffff;height:44%;margin:28% auto;" viewBox="0 -256 864 1664"><path transform="matrix(1,0,0,-1,-95,1280)" d="M 959,1524 V 1260 H 802 q -86,0 -116,-36 -30,-36 -30,-108 V 927 H 949 L 910,631 H 656 V -128 H 350 V 631 H 95 v 296 h 255 v 218 q 0,186 104,288.5 104,102.5 277,102.5 147,0 228,-12 z" /></svg></a> <a href="https://twitter.com/share?url='+encodeURIComponent(document.URL)+'&text='+encodeURIComponent(document.title)+'"target="_blank"title="Twitter"style="display:inline-block;vertical-align:middle;width:2em;height:2em;border-radius:50%;box-shadow:.1em .1em 0.26em rgba(0,0,0,.3);background:#4f4f4f;"><svg style="display:block;fill:#ffffff;height:36%;margin:32% auto;" viewBox="0 -256 1576 1280"><path transform="matrix(1,0,0,-1,-44,1024)" d="m 1620,1128 q -67,-98 -162,-167 1,-14 1,-42 0,-130 -38,-259.5 Q 1383,530 1305.5,411 1228,292 1121,200.5 1014,109 863,54.5 712,0 540,0 269,0 44,145 q 35,-4 78,-4 225,0 401,138 -105,2 -188,64.5 -83,62.5 -114,159.5 33,-5 61,-5 43,0 85,11 Q 255,532 181.5,620.5 108,709 108,826 v 4 q 68,-38 146,-41 -66,44 -105,115 -39,71 -39,154 0,88 44,163 Q 275,1072 448.5,982.5 622,893 820,883 q -8,38 -8,74 0,134 94.5,228.5 94.5,94.5 228.5,94.5 140,0 236,-102 109,21 205,78 -37,-115 -142,-178 93,10 186,50 z" /></svg></a> <a href="https://www.reddit.com/submit?url='+encodeURIComponent(document.URL)+'&title='+encodeURIComponent(document.title)+'"target="_blank"title="Reddit"style="display:inline-block;vertical-align:middle;width:2em;height:2em;border-radius:50%;box-shadow:.1em .1em 0.26em rgba(0,0,0,.3);background:#4f4f4f;"><svg style="display:block;fill:#ffffff;height:46%;margin:26% auto;" viewBox="0 -256 1792 1692"><path transform="matrix(1,0,0,-1,0,1280)" d="m 1792,690 q 0,-58 -29,-105.5 -30,-47.5 -80,-72.5 12,-46 12,-96 0,-155 -106,-287 Q 1482,-3 1298,-79.5 1114,-156 898,-156 682,-156 498.5,-79.5 315,-3 208.5,129 102,261 102,416 q 0,47 11,94 Q 62,535 31,583.5 0,632 0,690 q 0,82 58,140.5 58,58.5 141,58.5 85,0 145,-63 218,152 515,162 l 116,521 q 3,13 15,21 12,8 26,5 l 369,-81 q 18,37 54,60 36,22 79,22 62,0 106,-43 44,-44 44,-106 0,-62 -44,-106 -44,-44 -106,-44 -62,0 -105,44 -44,43 -44,105 l -334,74 -104,-472 q 300,-9 519,-160 58,61 143,61 83,0 141,-58.5 58,-58.5 58,-140.5 z M 418,491 q 0,-62 43.5,-106 43.5,-44 105.5,-44 62,0 106,44 44,44 44,106 0,62 -44,105.5 Q 629,640 567,640 506,640 462,596 418,552 418,491 z m 810,-355 q 11,11 11,26 0,15 -11,26 -10,10 -25,10 -15,0 -26,-10 -41,-42 -121,-62 -80,-20 -160,-20 -80,0 -160,20 -80,20 -121,62 -11,10 -26,10 -15,0 -25,-10 Q 553,178 553,162.5 553,147 564,136 607,93 682.5,68 758,43 805,38.5 852,34 896,34 q 44,0 91,4.5 47,4.5 123,29.5 75,25 118,68 z m -3,205 q 62,0 106,44 43,44 43,106 0,61 -44,105 -44,44 -105,44 -62,0 -106,-43.5 -44,-43.5 -44,-105.5 0,-62 44,-106 44,-44 106,-44 z" /></svg></a> '+(/mobile|android|blackberry/i.test(navigator.userAgent)?'<a href="whatsapp://send?text='+encodeURIComponent(document.URL)+'"title="WhatsApp"style="display:inline-block;vertical-align:middle;width:2em;height:2em;border-radius:50%;box-shadow:.1em .1em 0.26em rgba(0,0,0,.3);background:#4f4f4f;"><svg style="display:block;fill:#ffffff;height:44%;margin:28% auto;" viewBox="0 -256 1536 1548"><path transform="matrix(1,0,0,-1,0,1158)" d="m 985,562 q 13,0 98,-44 84,-44 89,-53 2,-5 2,-15 0,-33 -17,-76 -16,-39 -71,-65.5 -55,-26.5 -102,-26.5 -57,0 -190,62 -98,45 -170,118 -72,73 -148,185 -72,107 -71,194 v 8 q 3,91 74,158 24,22 52,22 6,0 18,-1 12,-2 19,-2 19,0 26.5,-6 7.5,-7 15.5,-28 8,-20 33,-88 25,-68 25,-75 0,-21 -34.5,-57.5 Q 599,735 599,725 q 0,-7 5,-15 34,-73 102,-137 56,-53 151,-101 12,-7 22,-7 15,0 54,48.5 39,48.5 52,48.5 z M 782,32 q 127,0 244,50 116,50 200,134 84,84 134,200.5 50,116.5 50,243.5 0,127 -50,243.5 -50,116.5 -134,200.5 -84,84 -200,134 -117,50 -244,50 -127,0 -243.5,-50 Q 422,1188 338,1104 254,1020 204,903.5 154,787 154,660 154,457 274,292 L 195,59 437,136 Q 595,32 782,32 z m 0,1382 q 153,0 293,-60 139,-60 240,-161 101,-101 161,-240.5 Q 1536,813 1536,660 1536,507 1476,367.5 1416,228 1315,127 1214,26 1075,-34 935,-94 782,-94 587,-94 417,0 L 0,-134 136,271 Q 28,449 28,660 q 0,153 60,292.5 60,139.5 161,240.5 101,101 240.5,161 139.5,60 292.5,60 z" /></svg></a> ':'')+'<a href="https://www.buttons.social/share/#'+encodeURIComponent(document.URL)+','+encodeURIComponent(document.title)+','+encodeURIComponent(document.querySelector('meta[name=description]')?document.querySelector('meta[name=description]').content:'')+'"target="_blank"title="More Services"style="display:inline-block;vertical-align:middle;width:2em;height:2em;border-radius:50%;box-shadow:.1em .1em 0.26em rgba(0,0,0,.3);background:#4f4f4f;"><svg style="display:block;fill:#ffffff;height:28%;margin:46% auto 0;" viewBox="0 0 10 4"><circle cx="2" cy="2" r="1" /><circle cx="5" cy="2" r="1" /><circle cx="8" cy="2" r="1" /></svg></a>');</script><!--end buttons.social-->
</div>



<div class="comments">
    <h3 class="title is-4">Comentarios</h3>
    
<div id="valine-thread"></div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='//unpkg.com/valine/dist/Valine.min.js'></script>
<script>
    new Valine({
        el: '#valine-thread',
        appId: '0yUM72Fgu05x3gqAV3Lnu9Kc-MdYXbMMI',
        appKey: 'oHSGv2rFXWmPEMvfI9p6sMIP',
        notify: false,
        verify: false,
        avatar: '',
        placeholder: 'Di algo...',
        meta: ['nick', 'mail'],
        visitor: true,
        lang: ''
    })
</script>


</div>

    </div>
</section>
    <footer class="footer">
    <div class="container">
        <div class="columns content">
            <div class="column is-narrow has-text-centered">
                &copy; 2020 Ignacio Castro&nbsp;
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a
                        target="_blank" rel="noopener" href="http://github.com/ppoffice/hexo-theme-minos">Minos</a>
            </div>
            <div class="column is-hidden-mobile"></div>

            
            
        </div>
    </div>
</footer>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script>

<!-- test if the browser is outdated -->
<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" target="_blank" rel="noopener" href="http://outdatedbrowser.com/">Update my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.js"></script>
<script>
    $(document).ready(function () {
        // plugin function, place inside DOM ready function
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        })
    });
</script>

<script>
    window.FontAwesomeConfig = {
        searchPseudoElements: true
    }
    moment.locale("es");
</script>


    
    
    
    
    
    
<script src="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/js/lightgallery-all.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/js/jquery.justifiedGallery.min.js"></script>
<script>
    (function ($) {
        $(document).ready(function () {
            if (typeof($.fn.lightGallery) === 'function') {
                $('.article.gallery').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof($.fn.justifiedGallery) === 'function') {
                $('.justified-gallery').justifiedGallery();
            }
        });
    })(jQuery);
</script>

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <style>
        .hljs {
            position: relative;
        }

        .hljs .clipboard-btn {
            float: right;
            color: #9a9a9a;
            background: none;
            border: none;
            cursor: pointer;
        }

        .hljs .clipboard-btn:hover {
          color: #8a8a8a;
        }

        .hljs > .clipboard-btn {
            display: none;
            position: absolute;
            right: 4px;
            top: 4px;
        }

        .hljs:hover > .clipboard-btn {
            display: inline;
        }

        .hljs > figcaption > .clipboard-btn {
            margin-right: 4px;
        }
    </style>
    <script>
      $(document).ready(function () {
        $('figure.hljs').each(function(i, figure) {
          var codeId = 'code-' + i;
          var code = figure.querySelector('.code');
          var copyButton = $('<button>Copy <i class="far fa-clipboard"></i></button>');
          code.id = codeId;
          copyButton.addClass('clipboard-btn');
          copyButton.attr('data-clipboard-target-id', codeId);

          var figcaption = figure.querySelector('figcaption');

          if (figcaption) {
            figcaption.append(copyButton[0]);
          } else {
            figure.prepend(copyButton[0]);
          }
        })

        var clipboard = new ClipboardJS('.clipboard-btn', {
          target: function(trigger) {
            return document.getElementById(trigger.getAttribute('data-clipboard-target-id'));
          }
        });
        clipboard.on('success', function(e) {
          e.clearSelection();
        })
      })
    </script>

    
    

    



<script src="/blog/js/script.js"></script>


    
    <div class="searchbox ins-search">
    <div class="searchbox-mask"></div>
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Escribe algo..." />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Páginas',
                CATEGORIES: 'Categorías',
                TAGS: 'Tags',
                UNTITLED: '(Sin título)',
            },
            CONTENT_URL: '/blog/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>

<script src="/blog/js/insight.js"></script>

    
</body>
</html>