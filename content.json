{"pages":[],"posts":[{"title":"Extrayendo datos de la API de Servel","text":"Hace pocos dias se estrenó la nueva aplicación del Servel, la cual te permite revisar tu información electoral facilmente. Esta no usa captcha (como la página web de la Servel), por lo tanto, podremos aprovecharnos de estos para Extraer información desde los servidores en JSON. La app Este sábado Servel dió a conocer una nueva aplicación, la cual permite revisar tus datos electorales (Nombre completo, comuna, provincia, región, mesa, lugar de votación y posibilidad de votar). Diferencias con la versión webLa versión web entrega los mismos datos que la aplicación, pero esta requiere una autenticación con hCaptcha para hacer una petición a la API y entregar los datos, lo que imposibilitaria la mineria de datos y/o el scraping con bots. Al hacer click en la verificación y completar el challenge, hCaptcha te devuelve un UUID123456789{ &quot;pass&quot;:true, &quot;generated_pass_UUID&quot;:&quot;W0_eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJwYXNza2V5IjoiT0hna3JJMFBIa0IwL2RKUGgvLzRxZEFaVUxUYTd1eUFNVmlYWCtWK1Ztc2tNQ3Jxa2VoWXNJelNjdHBOR3V6dWJ6d0MrU2k5bHRlaVB6b0o2bEk2b3dXb2N1amxCcDg4dXU2NHVVclhKOVRHcFFXVEg2cWFScmFuUzg2QUZNMXAxVUJnSHFwQ2lXRks4dnN5NnRiRUwzY250VGZuWDZmSnFHZ0hpdnM2bng2Y3NVMGttLys0K3RyZGJuWmp5Ym5TcWN4R1U4ZEQzRXppT0tZVU5iUC9keGhKQmNndHFRUzFzTEhybXh1MnZYY1haU3N5TGFaRmhMaUQ4V09BdEE2QXVMVDBReEpOUXowbEJTeDk0L3BMTkZrSk1NdzdBQXJMQmx5Mi9KbFJnd1F2ZnpuaEk1RmVFL0FMOU1CbFQvanNLclNsN0YycTNKcVVrdEYrbCttM0l2MURTR05pa2JhUlFJdWs3S2RudUQ4emRsSFU3Si9Bay9jREFpeXFVTitlbEVHUTB4SFppR0xaeTI1c2F6b2ZkdmdJcDhSQ1NIbHZYUkg0cEhaaWIxY0Jua0oxIiwic2l0ZWtleSI6ImY3OWFlM2MxLWVhYzAtNDllMS1hMDEwLWY4MzAwMGFkNTA3OSIsImV4cCI6MTYwMTg3MTIxMCwicGQiOjB9.EuTcPg2XFSCeu3PJLPsoV-fnxnkAQtgJcC8AAiAkKxU&quot;, &quot;expiration&quot;:120, &quot;c&quot;:{ &quot;type&quot;:&quot;hsw&quot;, &quot;req&quot;:&quot;eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzIjoyLCJ0IjoidyIsImQiOiJmNzlhZTNjMS1lYWMwLTQ5ZTEtYTAxMC1mODMwMDBhZDUwNzkiLCJsIjoiaHR0cHM6Ly9hc3NldHMuaGNhcHRjaGEuY29tL2MvOWI5MmE0MSIsImUiOjE2MDE4NzEzMzB9.cmVLK5gY0PbD-vhjfJxPXYh72yfHkYWo1VMFozzn0jU&quot; }} Al hacer click en Consultar, se hace una petición a https://api.servel.cl/private/registro/v2, con los siguientes parametros (RUT sin digito verificador y UUID de hCaptcha)1234{ &quot;cedula&quot;:&quot;5126663&quot;, &quot;response&quot;:&quot;W0_eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJwYXNza2V5IjoiT0hna3JJMFBIa0IwL2RKUGgvLzRxZEFaVUxUYTd1eUFNVmlYWCtWK1Ztc2tNQ3Jxa2VoWXNJelNjdHBOR3V6dWJ6d0MrU2k5bHRlaVB6b0o2bEk2b3dXb2N1amxCcDg4dXU2NHVVclhKOVRHcFFXVEg2cWFScmFuUzg2QUZNMXAxVUJnSHFwQ2lXRks4dnN5NnRiRUwzY250VGZuWDZmSnFHZ0hpdnM2bng2Y3NVMGttLys0K3RyZGJuWmp5Ym5TcWN4R1U4ZEQzRXppT0tZVU5iUC9keGhKQmNndHFRUzFzTEhybXh1MnZYY1haU3N5TGFaRmhMaUQ4V09BdEE2QXVMVDBReEpOUXowbEJTeDk0L3BMTkZrSk1NdzdBQXJMQmx5Mi9KbFJnd1F2ZnpuaEk1RmVFL0FMOU1CbFQvanNLclNsN0YycTNKcVVrdEYrbCttM0l2MURTR05pa2JhUlFJdWs3S2RudUQ4emRsSFU3Si9Bay9jREFpeXFVTitlbEVHUTB4SFppR0xaeTI1c2F6b2ZkdmdJcDhSQ1NIbHZYUkg0cEhaaWIxY0Jua0oxIiwic2l0ZWtleSI6ImY3OWFlM2MxLWVhYzAtNDllMS1hMDEwLWY4MzAwMGFkNTA3OSIsImV4cCI6MTYwMTg3MTIxMCwicGQiOjB9.EuTcPg2XFSCeu3PJLPsoV-fnxnkAQtgJcC8AAiAkKxU&quot;} Si es exitoso, la API te entregará, en JSON, los datos electorales del RUT123456789101112131415161718192021222324252627282930{ &quot;statusCode&quot;:200, &quot;datos&quot;:{ &quot;cedula&quot;:&quot;5126663&quot;, &quot;dv&quot;:&quot;3&quot;, &quot;nombre&quot;:&quot;MIGUEL JUAN SEBASTIAN PIÑERA ECHENIQUE&quot;, &quot;sexo&quot;:&quot;V&quot;, &quot;tipomesa&quot;:&quot;V&quot;, &quot;codigo_circuns&quot;:202, &quot;numero_mesa&quot;:149, &quot;fusion&quot;:149, &quot;mesa_fusion&quot;:&quot;149V&quot;, &quot;estado_sufragio&quot;:&quot;SÍ&quot;, &quot;nombre_circuns&quot;:&quot;APOQUINDO&quot;, &quot;nombre_comuna&quot;:&quot;LAS CONDES&quot;, &quot;nombre_provincia&quot;:&quot;SANTIAGO&quot;, &quot;numero_region&quot;:13, &quot;nombre_region&quot;:&quot;METROPOLITANA DE SANTIAGO&quot;, &quot;codigo_pais&quot;:&quot;CL&quot;, &quot;glosa_pais&quot;:&quot;CHILE&quot;, &quot;codigo_local&quot;:&quot;131442&quot;, &quot;nombre_local&quot;:&quot;COLEGIO SAN FRANCISCO LOS DOMINICOS LOCAL: 2&quot;, &quot;direccion_local&quot;:&quot;AVENIDA COLON 9140&quot;, &quot;codigo_colegio&quot;:&quot;13037&quot;, &quot;nombre_colegio&quot;:&quot;COLEGIO ALCAZAR DE LAS CONDES&quot;, &quot;direccion_colegio&quot;:&quot;ALONSO DE CORDOVA 4751&quot;, &quot;vocal&quot;:&quot;NO&quot;, &quot;miembro&quot;:&quot;NO&quot; }} Funcionalidad y extracción de datos con la API de la app Al ingresar a la app (yo he hecho el ingreso con un iPhone 6, iOS 12.4.8), esta hace una petición a https://device-provisioning.googleapis.com, con user-agent “servelapp2020/1.20.17 CFNetwork/978.0.7 Darwin/18.7.0” (para reconocer la aplicación) entregando datos del dispositivo. 12345678910111213141516171819{ &quot;locale&quot;: &quot;en&quot;, &quot;digest&quot;: &quot;&quot;, &quot;checkin&quot;: { &quot;iosbuild&quot;: { &quot;model&quot;: &quot;iPhone7,2&quot;, &quot;os_version&quot;: &quot;IOS_12.4.8&quot; }, &quot;last_checkin_msec&quot;: 0, &quot;user_number&quot;: 0, &quot;type&quot;: 2 }, &quot;time_zone&quot;: &quot;America\\/Santiago&quot;, &quot;user_serial_number&quot;: 0, &quot;id&quot;: 0, &quot;version&quot;: 2, &quot;security_token&quot;: 0, &quot;fragment&quot;: 0} En cURL: 1curl -H &apos;Host: device-provisioning.googleapis.com&apos; -H &apos;accept: */*&apos; -H &apos;content-type: application/json&apos; -H &apos;user-agent: servelapp2020/1.20.17 CFNetwork/978.0.7 Darwin/18.7.0&apos; -H &apos;accept-language: en-us&apos; --data-binary &apos;{&quot;locale&quot;:&quot;en&quot;,&quot;digest&quot;:&quot;&quot;,&quot;checkin&quot;:{&quot;iosbuild&quot;:{&quot;model&quot;:&quot;iPhone7,2&quot;,&quot;os_version&quot;:&quot;IOS_12.4.8&quot;},&quot;last_checkin_msec&quot;:0,&quot;user_number&quot;:0,&quot;type&quot;:2},&quot;time_zone&quot;:&quot;America\\/Santiago&quot;,&quot;user_serial_number&quot;:0,&quot;id&quot;:0,&quot;version&quot;:2,&quot;security_token&quot;:0,&quot;fragment&quot;:0}&apos; --compressed &apos;https://device-provisioning.googleapis.com/checkin&apos; El servidor, como respuesta, hace la aprobación de seguridad, confirmando el dispositivo, y entregando tokens y strings. De esta, son los strings security_token, version_info, y android_id los que nos servirán como autenticación para la API. 12345678910111213141516171819202122{ &quot;device_data_version_info&quot;: &quot;ABFEt1VTTekDcnAhNXPvy6BZ7tuMtDPrdIQ5vSRdeYVUcZAideWHReuDNoWV2gw18eIzWI4jWdUsh8QU6aiJc46Atdohcf7EgcOSxDJfx-OtcuBmtsiacLb0qawlDQcpo8Njk9qbtrXru0rnva_XvuzhlCctnnlIukcGulabQvN6jmxoRXXIhpJELuaUXC9rVnYhE2tVkyqWP4tvesAVA-6Ti84vDT2vqHsivwZzfnGPlgxPO2xAj4M0CAo6GGjL2V5CmQuPukcAcGJxQdKFSIx0JlBNWQX3CcB-XXD-Xq0L7CkH8iiwWnWEVJk-9GaE0xAOOzXrb8tvkjiLem5gn1xHQbPiujUx2l19TPMZl2foHGQG01263kk&quot;, &quot;stats_ok&quot;: true, &quot;security_token&quot;: 6383701952383370585, &quot;digest&quot;: &quot;mxJv2zxaXADwB0xiQqwgGg\\u003d\\u003d&quot;, &quot;time_msec&quot;: 1601915127764, &quot;version_info&quot;: &quot;M778Po2V600ZENW7sZq6nvlCeFCZTxc&quot;, &quot;android_id&quot;: 4883965058536125901, &quot;setting&quot;: [{ &quot;name&quot;: &quot;android_id&quot;, &quot;value&quot;: &quot;4883965058536125901&quot; }, { &quot;name&quot;: &quot;device_country&quot;, &quot;value&quot;: &quot;cl&quot; }, { &quot;name&quot;: &quot;device_registration_time&quot;, &quot;value&quot;: &quot;1601913600000&quot; }, { &quot;name&quot;: &quot;ios_device&quot;, &quot;value&quot;: &quot;1&quot; }]} Al mismo tiempo, se hace una petición a https://https://firebaseinstallations.googleapis.com/v1/projects/servelciudadano/installations/, especificando mas datos de la aplicación. Desde esta petición, appId y fid se usarán en la autenticación de la API. 123456{ &quot;appId&quot;: &quot;1:507517598050:ios:d03b8533eec1c345&quot;, &quot;fid&quot;: &quot;e7EncfKdiUWQttT04VCand&quot;, &quot;authVersion&quot;: &quot;FIS_v2&quot;, &quot;sdkVersion&quot;: &quot;i:1.1.0&quot;} En cURL: 1curl -H &apos;Host: firebaseinstallations.googleapis.com&apos; -H &apos;content-type: application/json&apos; -H &apos;accept: */*&apos; -H &apos;x-firebase-client: apple-sdk/18A390 fire-analytics/6.2.2 fire-fcm/4.2.1 fire-iid/4.3.1 fire-install/1.1.0 fire-ios/6.6.1 swift/true xcode/12A7300&apos; -H &apos;x-firebase-client-log-type: 3&apos; -H &apos;x-ios-bundle-identifier: com.Adexus.ServelCiudadano&apos; -H &apos;accept-language: en-us&apos; -H &apos;x-goog-api-key: AIzaSyB2X9DSkjsyoQjEkoHjDFj5z1Zs6DXUgAc&apos; -H &apos;user-agent: servelapp2020/1.20.17 CFNetwork/978.0.7 Darwin/18.7.0&apos; --data-binary &apos;{&quot;appId&quot;:&quot;1:507517598050:ios:d03b8533eec1c345&quot;,&quot;fid&quot;:&quot;e7EncfKdiUWQttT04VCand&quot;,&quot;authVersion&quot;:&quot;FIS_v2&quot;,&quot;sdkVersion&quot;:&quot;i:1.1.0&quot;}&apos; --compressed &apos;https://firebaseinstallations.googleapis.com/v1/projects/servelciudadano/installations/&apos; Esta petición devolverá, entre más información, un token/authToken, que tiene expiración de 1 semana, y que tambien será parte de la autenticación a la API. 123456789{ &quot;name&quot;: &quot;projects/507517598050/installations/e7EncfKdiUWQttT04VCand&quot;, &quot;fid&quot;: &quot;e7EncfKdiUWQttT04VCand&quot;, &quot;refreshToken&quot;: &quot;2_L3tpHZWs-QoBNhT86Hkj1Md_utIliPVlWT-3bdG69Vn2lRdQoV6vmm_7KckFnuV2&quot;, &quot;authToken&quot;: { &quot;token&quot;: &quot;eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCJ9.eyJmaWQiOiJlN0VuY2ZLZGlVV1F0dFQwNFZDYW5kIiwicHJvamVjdE51bWJlciI6NTA3NTE3NTk4MDUwLCJleHAiOjE2MDI1MTk5MjgsImFwcElkIjoiMTo1MDc1MTc1OTgwNTA6aW9zOmQwM2I4NTMzZWVjMWMzNDUifQ.AB2LPV8wRAIgHPJgdMZIWMQTaHvsyuLorXK1uLh0yCg5f1tFMVcVahYCIB4JXB4-IaFLF5Jv1vT34rQf3jTsYnva0uCwFTCiUMcp&quot;, &quot;expiresIn&quot;: &quot;604800s&quot; }} Se hace una petición POST a https://fcmtoken.googleapis.com/register, con los siguientes datos: Primer paso android_id version_info security_token Segundo paso appId fid token (response)123456789101112131415161718:method: POST:scheme: https:path: /register:authority: fcmtoken.googleapis.comcontent-type: application/x-www-form-urlencodedaccept: */*x-firebase-client: apple-sdk/18A390 fire-analytics/6.2.2 fire-fcm/4.2.1 fire-iid/4.3.1 fire-install/1.1.0 fire-ios/6.6.1 swift/true xcode/12A7300authorization: AidLogin 4883965058536125901:6383701952383370585x-firebase-client-log-type: 1accept-language: en-usapp: com.Adexus.ServelCiudadanoaccept-encoding: br, gzip, deflatecontent-length: 240user-agent: servelapp2020/1.20.17 CFNetwork/978.0.7 Darwin/18.7.0info: M778Po2V600ZENW7sZq6nvlCeFCZTxcx-goog-firebase-installations-auth: eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCJ9.eyJmaWQiOiJlN0VuY2ZLZGlVV1F0dFQwNFZDYW5kIiwicHJvamVjdE51bWJlciI6NTA3NTE3NTk4MDUwLCJleHAiOjE2MDI1MTk5MjgsImFwcElkIjoiMTo1MDc1MTc1OTgwNTA6aW9zOmQwM2I4NTMzZWVjMWMzNDUifQ.AB2LPV8wRAIgHPJgdMZIWMQTaHvsyuLorXK1uLh0yCg5f1tFMVcVahYCIB4JXB4-IaFLF5Jv1vT34rQf3jTsYnva0uCwFTCiUMcpX-osv=12.4.8&amp;device=4883965058536125901&amp;X-scope=*&amp;plat=2&amp;app=com.Adexus.ServelCiudadano&amp;app_ver=1.20.17&amp;X-cliv=fiid-4.2.1&amp;sender=507517598050&amp;X-subtype=507517598050&amp;appid=e7EncfKdiUWQttT04VCand&amp;gmp_app_id=1:507517598050:ios:d03b8533eec1c345 En cURL:1curl -H &apos;Host: fcmtoken.googleapis.com&apos; -H &apos;content-type: application/x-www-form-urlencoded&apos; -H &apos;accept: */*&apos; -H &apos;x-firebase-client: apple-sdk/18A390 fire-analytics/6.2.2 fire-fcm/4.2.1 fire-iid/4.3.1 fire-install/1.1.0 fire-ios/6.6.1 swift/true xcode/12A7300&apos; -H &apos;authorization: AidLogin 4883965058536125901:6383701952383370585&apos; -H &apos;x-firebase-client-log-type: 1&apos; -H &apos;accept-language: en-us&apos; -H &apos;app: com.Adexus.ServelCiudadano&apos; -H &apos;user-agent: servelapp2020/1.20.17 CFNetwork/978.0.7 Darwin/18.7.0&apos; -H &apos;info: M778Po2V600ZENW7sZq6nvlCeFCZTxc&apos; -H &apos;x-goog-firebase-installations-auth: eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCJ9.eyJmaWQiOiJlN0VuY2ZLZGlVV1F0dFQwNFZDYW5kIiwicHJvamVjdE51bWJlciI6NTA3NTE3NTk4MDUwLCJleHAiOjE2MDI1MTk5MjgsImFwcElkIjoiMTo1MDc1MTc1OTgwNTA6aW9zOmQwM2I4NTMzZWVjMWMzNDUifQ.AB2LPV8wRAIgHPJgdMZIWMQTaHvsyuLorXK1uLh0yCg5f1tFMVcVahYCIB4JXB4-IaFLF5Jv1vT34rQf3jTsYnva0uCwFTCiUMcp&apos; --data-binary &quot;X-osv=12.4.8&amp;device=4883965058536125901&amp;X-scope=*&amp;plat=2&amp;app=com.Adexus.ServelCiudadano&amp;app_ver=1.20.17&amp;X-cliv=fiid-4.2.1&amp;sender=507517598050&amp;X-subtype=507517598050&amp;appid=e7EncfKdiUWQttT04VCand&amp;gmp_app_id=1:507517598050:ios:d03b8533eec1c345&quot; --compressed &apos;https://fcmtoken.googleapis.com/register&apos; La respuesta a esta petición, será un token necesario para hacer, finalmente, la primera de dos peticiones API al servidor de servel.12token=e7EncfKdiUWQttT04VCand:APA91bF88vXmjzkeDEW3pR-pZP0nSBXEb9DX3MPrEugIt2_lVQg2jBJe1_ltWhRgrL1gIpZjV5JKd5r4dh2XeChO1mOhidnY0zPh29mhUvCYTInpYAlvwrVVJhctMOiAZMSAaRU6ddng Se hace una petición a https://apiapp.servelelecciones.cl/ServelCiudadanoBackend/api/auth/getToken, con parametros rut (que será modificado con el RUT por consultar, sin puntos ni digito verificador), y deviceToken, que es el sobrenombre de token de la respuesta de la petición en el paso 3. 1234{ &quot;rut&quot;: &quot;5126663&quot;, &quot;deviceToken&quot;: &quot;e7EncfKdiUWQttT04VCand:APA91bF88vXmjzkeDEW3pR-pZP0nSBXEb9DX3MPrEugIt2_lVQg2jBJe1_ltWhRgrL1gIpZjV5JKd5r4dh2XeChO1mOhidnY0zPh29mhUvCYTInpYAlvwrVVJhctMOiAZMSAaRU6ddng&quot;} En cURL: 1curl -H &apos;Host: apiapp.servelelecciones.cl&apos; -H &apos;accept: application/json, text/plain, */*&apos; -H &apos;content-type: application/json&apos; -H &apos;user-agent: Mozilla/5.0 (iPhone; CPU OS 12_4.8 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/12.4.8 Mobile/10A5355d Safari/8536.25&apos; -H &apos;accept-language: en-us&apos; --data-binary &apos;{&quot;rut&quot;:&quot;5126663&quot;,&quot;deviceToken&quot;:&quot;e7EncfKdiUWQttT04VCand:APA91bF88vXmjzkeDEW3pR-pZP0nSBXEb9DX3MPrEugIt2_lVQg2jBJe1_ltWhRgrL1gIpZjV5JKd5r4dh2XeChO1mOhidnY0zPh29mhUvCYTInpYAlvwrVVJhctMOiAZMSAaRU6ddng&quot;}&apos; --compressed &apos;https://apiapp.servelelecciones.cl/ServelCiudadanoBackend/api/auth/getToken&apos; Como respuesta, el servidor nos generará un token, el cual representa al RUT y token entregados en la petición 123{ &quot;token&quot;: &quot;eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzUxMiJ9.eyJzdWIiOiI1MTI2NjYzIiwiZXhwIjoxNjA5NjkxMTQyLCJqdGkiOiI0NzdlNzM1MC00N2EwLTRhN2ItOTFiYy1kYzZjOGFhMjAyZDkifQ.U68HBZDR7VJjp-vqf9jrMt8Fx8I4-OXzsMruT9OWo12J0hBGRj6lZ5cCfTKn7dpv6RF_FLmmzf-eCOFFgvQMMrttIMU_xjLJSMvQLTh02NM84UoRzKJqVmnGT9d15IDQ-jYWWFTHPTqgeSexqjYcEiNWduTRrHAWhFwMkfMv0CJFxc9HR8NHE_yFNFxSdBDcGqrdJ8yQBxsI2KdJN4BJF-YXZIpMdKozGZOq25XtwLVeEsaJhIaOIPhNJI_8hT4TA_Gajju1IElIQq6w2SSFrWGq7_FC8Q4PdZwGe6ZCeA3Do6F76AEymsFORIqsb8-SWrL-gYsb_jdXFtWORIazSg&quot;} Se hace una petición a https://apiapp.servelelecciones.cl/ServelCiudadanoBackend/api/private/CiudadanoRestService/CiudadanoInfo, con header de autorización “Bearer (token del paso 4)” 1curl -H &apos;Host: apiapp.servelelecciones.cl&apos; -H &apos;accept: application/json, text/plain, */*&apos; -H &apos;content-type: application/json&apos; -H &apos;accept-language: en-us&apos; -H &apos;user-agent: Mozilla/5.0 (iPhone; CPU OS 12_4.8 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/12.4.8 Mobile/10A5355d Safari/8536.25&apos; -H &apos;authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzUxMiJ9.eyJzdWIiOiI1MTI2NjYzIiwiZXhwIjoxNjA5NjkxMTQyLCJqdGkiOiI0NzdlNzM1MC00N2EwLTRhN2ItOTFiYy1kYzZjOGFhMjAyZDkifQ.U68HBZDR7VJjp-vqf9jrMt8Fx8I4-OXzsMruT9OWo12J0hBGRj6lZ5cCfTKn7dpv6RF_FLmmzf-eCOFFgvQMMrttIMU_xjLJSMvQLTh02NM84UoRzKJqVmnGT9d15IDQ-jYWWFTHPTqgeSexqjYcEiNWduTRrHAWhFwMkfMv0CJFxc9HR8NHE_yFNFxSdBDcGqrdJ8yQBxsI2KdJN4BJF-YXZIpMdKozGZOq25XtwLVeEsaJhIaOIPhNJI_8hT4TA_Gajju1IElIQq6w2SSFrWGq7_FC8Q4PdZwGe6ZCeA3Do6F76AEymsFORIqsb8-SWrL-gYsb_jdXFtWORIazSg&apos; --data-binary &apos;{&quot;timestamp&quot;:0}&apos; --compressed &apos;https://apiapp.servelelecciones.cl/ServelCiudadanoBackend/api/private/CiudadanoRestService/CiudadanoInfo&apos; Como respuesta, tendremos, en JSON, los datos electorales del RUT solicitado. 123456789101112131415161718192021222324252627282930313233{ &quot;timestamp&quot;: 1601694000000, &quot;ciudadano&quot;: { &quot;region&quot;: &quot;METROPOLITANA DE SANTIAGO&quot;, &quot;rut&quot;: &quot;5126663-3&quot;, &quot;circElectoral&quot;: &quot;APOQUINDO&quot;, &quot;nombre&quot;: &quot;MIGUEL JUAN SEBASTIAN PIÑERA ECHENIQUE&quot;, &quot;comuna&quot;: &quot;LAS CONDES&quot;, &quot;mesa&quot;: &quot;149V&quot;, &quot;pais&quot;: &quot;CHILE&quot;, &quot;provincia&quot;: &quot;SANTIAGO&quot;, &quot;local&quot;: { &quot;codigo&quot;: &quot;0&quot;, &quot;nombre&quot;: &quot;COLEGIO SAN FRANCISCO LOS DOMINICOS LOCAL: 2&quot;, &quot;ubicacion&quot;: &quot;AVENIDA COLON 9140&quot;, &quot;lat&quot;: &quot;-33,416&quot;, &quot;lng&quot;: &quot;-70,539&quot; }, &quot;puedesufragar&quot;: &quot;SI&quot;, &quot;esmiembro&quot;: &quot;NO&quot;, &quot;nombrecolegio&quot;: &quot;COLEGIO ALCAZAR DE LAS CONDES&quot;, &quot;ubicacioncolegio&quot;: &quot;ALONSO DE CORDOVA 4751&quot;, &quot;esvocal&quot;: &quot;NO&quot;, &quot;verlocal&quot;: &quot;SI&quot;, &quot;codigocprovApp&quot;: &quot;0&quot;, &quot;codigocsenApp&quot;: &quot;0&quot;, &quot;codigodistApp&quot;: &quot;0&quot;, &quot;codigoglobalApp&quot;: &quot;0&quot;, &quot;verdesginacion&quot;: &quot;SI&quot; }, &quot;noticias&quot;: null, &quot;enlaces&quot;: null} Automatizar y obtener información desde el terminalTeniendo en cuenta que el token del servidor del Servel no es estático (Cambia por RUT), y que las demas tokens duran máximo 1 semana, despues de ejecutar todas las peticiones al menos una vez, se podrá guardar la token del paso 3, y partir por el paso 4 y 5. En el paso 4, reemplaza el RUT por otro al cual consultar (sin puntos ni digito verificador), y usa el token del paso 3. Al comando, en el final, se le puede añadir jq o json_pp, para parsear el JSON correctamente y facilitar la obtención de datos. 12curl -H [PARAMETROS] | jqcurl -H [PARAMETROS] | json_pp 1curl -H &apos;Host: apiapp.servelelecciones.cl&apos; -H &apos;accept: application/json, text/plain, */*&apos; -H &apos;content-type: application/json&apos; -H &apos;user-agent: Mozilla/5.0 (iPhone; CPU OS 12_4.8 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/12.4.8 Mobile/10A5355d Safari/8536.25&apos; -H &apos;accept-language: en-us&apos; --data-binary &apos;{&quot;rut&quot;:&quot;7052438&quot;,&quot;deviceToken&quot;:&quot;e7EncfKdiUWQttT04VCand:APA91bF88vXmjzkeDEW3pR-pZP0nSBXEb9DX3MPrEugIt2_lVQg2jBJe1_ltWhRgrL1gIpZjV5JKd5r4dh2XeChO1mOhidnY0zPh29mhUvCYTInpYAlvwrVVJhctMOiAZMSAaRU6ddng&quot;}&apos; --compressed &apos;https://apiapp.servelelecciones.cl/ServelCiudadanoBackend/api/auth/getToken&apos; | jq Respuesta:123{ &quot;token&quot; : &quot;eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzUxMiJ9.eyJzdWIiOiI3MDUyNDM4IiwiZXhwIjoxNjA5Njk4MjM5LCJqdGkiOiJlNDMyODI0NC03MGU5LTQxNTUtOGMxYi1kMGYxNjUxYjcwYTEifQ.b68PG9j4n0Y90qpOk9lTQFF162ahG-Uus3E2Gifg_vGS14lKFZoszekbozpxUneWlb2w8nKloZFgNyWVPBrrq_md_frrpPem3SwGCcwg1n7EvM7YF-Aql71RgroPPexW2cD8dSj_W2wyAEQ9WY0y3WChjgaGFtN_VAxicDSuBkes-YzgDxWc6eH8qTl3kZ68si7w-rHwuRRldojyJ5wq8kChNJ6qY6TWm4OfvTCSMG02N3tG1mWmwgEo7nYm1EbaNbSJbfRQL_0MJV90Vxjsng8DxrJOz1IiZrrb0Ok-cSxHEDBJHtUtWQCyE3sfiz4QZH_UeIjdUNuN28SxPosaUw&quot;} Usa el token para hacer la petición y obtener los datos electorales. Tambien es posible usar jq o jsonpp.1curl -H &apos;Host: apiapp.servelelecciones.cl&apos; -H &apos;accept: application/json, text/plain, */*&apos; -H &apos;content-type: application/json&apos; -H &apos;accept-language: en-us&apos; -H &apos;user-agent: Mozilla/5.0 (iPhone; CPU OS 12_4.8 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/12.4.8 Mobile/10A5355d Sa fari/8536.25&apos; -H &apos;authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzUxMiJ9.eyJzdWIiOiI3MDUyNDM4IiwiZXhwIjoxNjA5Njk4MjM5LCJqdGkiOiJlNDMyODI0NC03MGU5LTQxNTUtOGMxYi1kMGYxNjUxYjcwYTEifQ.b68PG9j4n0Y90qpOk9lTQFF162ahG-Uus3E2Gifg_vGS14lKFZoszekbozpxUneWlb2w8nKloZFgNyWVPBrrq_md_frrpPem3SwGCcwg1n7EvM7YF-Aql71RgroPPexW2cD8dSj_W2wyAEQ9WY0y3WChjgaGFtN_VAxicDSuBkes-YzgDxWc6eH8qTl3kZ68si7w-rHwuRRldojyJ5wq8kChNJ6qY6TWm4OfvTCSMG02N3tG1mWmwgEo7nYm1EbaNbSJbfRQL_0MJV90Vxjsng8DxrJOz1IiZrrb0Ok-cSxHEDBJHtUtWQCyE3sfiz4QZH_UeIjdUNuN28SxPosaUw&apos; --data-binary &apos;{&quot;timestamp&quot;:0}&apos; --compressed &apos;https://apiapp.servelelecciones.cl/ServelCiudadanoBackend/api/private/CiudadanoRestService/CiudadanoInfo&apos; | jq Respuesta:123456789101112131415161718192021222324252627282930313233{ &quot;timestamp&quot;: 1601694000000, &quot;ciudadano&quot;: { &quot;region&quot;: &quot;METROPOLITANA DE SANTIAGO&quot;, &quot;circElectoral&quot;: &quot;APOQUINDO&quot;, &quot;comuna&quot;: &quot;LAS CONDES&quot;, &quot;mesa&quot;: &quot;189M&quot;, &quot;nombre&quot;: &quot;MARIA CECILIA MOREL MONTES&quot;, &quot;pais&quot;: &quot;CHILE&quot;, &quot;provincia&quot;: &quot;SANTIAGO&quot;, &quot;rut&quot;: &quot;7052438-4&quot;, &quot;local&quot;: { &quot;codigo&quot;: &quot;0&quot;, &quot;nombre&quot;: &quot;COLEGIO DEL SAGRADO CORAZON DE APOQUINDO&quot;, &quot;ubicacion&quot;: &quot;SANTA MAGDALENA SOFIA 277&quot;, &quot;lat&quot;: &quot;-33,4101&quot;, &quot;lng&quot;: &quot;-70,5498&quot; }, &quot;puedesufragar&quot;: &quot;SI&quot;, &quot;esmiembro&quot;: &quot;NO&quot;, &quot;nombrecolegio&quot;: &quot;COLEGIO ALCAZAR DE LAS CONDES&quot;, &quot;ubicacioncolegio&quot;: &quot;ALONSO DE CORDOVA 4751&quot;, &quot;esvocal&quot;: &quot;NO&quot;, &quot;verlocal&quot;: &quot;SI&quot;, &quot;codigocprovApp&quot;: &quot;0&quot;, &quot;codigocsenApp&quot;: &quot;0&quot;, &quot;codigodistApp&quot;: &quot;0&quot;, &quot;codigoglobalApp&quot;: &quot;0&quot;, &quot;verdesginacion&quot;: &quot;SI&quot; }, &quot;noticias&quot;: null, &quot;enlaces&quot;: null}","link":"/blog/servelapi/"}],"tags":[{"name":"Servel","slug":"Servel","link":"/blog/tags/Servel/"}],"categories":[]}